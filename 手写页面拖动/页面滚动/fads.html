<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		*{
			margin:0;
			border:0;
			padding:0;
			box-sizing: border-box;
		}
		#div1{
			width: 500px;height: 500px;overflow:hidden;position: relative;border: 1px solid black;
		}
		#div2{
			width: 700px;height: 700px;background: #aaa;position: absolute;left: 0;top:0;background: url("./img.png") ;
		}
	</style>
</head>
<body>
<div id="div1">
	<div id="div2"></div>
</div>
<script type="text/javascript" src="./jquery-1.8.3.min.js"></script>
<script type="text/javascript">
/*	var cur = {             //记录鼠标按下时的坐标
	    x:0,
	    y:0,
	    flag:false
	}
var nx,ny,x,y;
    var maxW = $("#div2").width(),    //记录div当时的左偏移量
    maxH = $("#div2").height();     //记录div的上偏移量
//鼠标按下时的函数
function down(event){
    cur.flag = true;             //确认鼠标按下
    cur.x = event.offsetX;   //记录当前鼠标的x坐标
    cur.y = event.offsetY;   //记录当前鼠标的y坐标
}
//鼠标移动时的函数
	function move(event){
	    if(cur.flag){                      //如果是鼠标按下则继续执行
	        nx = event.offsetX - cur.x;  //记录鼠标在x轴移动的数据
	        ny = event.offsetY - cur.y;  //记录鼠标在y轴移动的数据
	        x = parseInt($("#div2").css("left"))+nx;                   //div在x轴的偏移量加上鼠标在x轴移动的距离
	        y = parseInt($("#div2").css("top"))+ny;                   //div在y轴的偏移量加上鼠标在y轴移动的距离
	        if(x>=0){
	        	x=0
	        }else if(x<=parseInt($("#div1").width())-maxW){
	        	x=parseInt($("#div1").width())-maxW;
	        };
	        if(y>=0){
	        	y=0;
	        }else if(y<=parseInt($("#div1").height())-maxH){
	        	y=parseInt($("#div1").height())-maxH
	        }
	        $("#div2").css("left",x+"px");
	        $("#div2").css("top",y+"px");
	    }
	}	
//鼠标释放时候的函数
	function end(){
		    cur.x=nx;
	        cur.y=ny;
	    cur.flag = false;                    //鼠标释放
	}
	$("#div2").mousedown(function(e){
		down(e)
	})
	$("#div2").mousemove(function(e){
		move(e)
	})
	$("#div2").on("mouseup",function(){
		end()
	})
	$("#div1").mouseleave(function(){
		end()
	})*/
	pageMove($("#div1"),$("#div2"))//div1是外围小的div2是里面的大的div
	function pageMove(div1,div2){
					var cur = {             //记录鼠标按下时的坐标
			    x:0,
			    y:0,
			    flag:false
			}
		var nx,ny,x,y;
		    var maxW = div2.width(),    //记录div当时的左偏移量
		    maxH = div2.height();     //记录div的上偏移量
		//鼠标按下时的函数
		function down(event){
		    cur.flag = true;             //确认鼠标按下
		    cur.x = event.offsetX;   //记录当前鼠标的x坐标
		    cur.y = event.offsetY;   //记录当前鼠标的y坐标
		}
		//鼠标移动时的函数
			function move(event){
			    if(cur.flag){                      //如果是鼠标按下则继续执行
			        nx = event.offsetX - cur.x;  //记录鼠标在x轴移动的数据
			        ny = event.offsetY - cur.y;  //记录鼠标在y轴移动的数据
			        x = parseInt(div2.css("left"))+nx;                   //div在x轴的偏移量加上鼠标在x轴移动的距离
			        y = parseInt(div2.css("top"))+ny;                   //div在y轴的偏移量加上鼠标在y轴移动的距离
			        if(x>=0){
			        	x=0
			        }else if(x<=parseInt(div1.width())-maxW){
			        	x=parseInt(div1.width())-maxW;
			        };
			        if(y>=0){
			        	y=0;
			        }else if(y<=parseInt(div1.height())-maxH){
			        	y=parseInt(div1.height())-maxH
			        }
			        div2.css("left",x+"px");
			        div2.css("top",y+"px");
			    }
			}	
		//鼠标释放时候的函数
			function end(){
				    cur.x=nx;
			        cur.y=ny;
			    cur.flag = false;                    //鼠标释放
			}
			div2.mousedown(function(e){
				down(e)
			})
			div2.mousemove(function(e){
				move(e)
			})
			div2.on("mouseup",function(){
				end()
			})
			div2.mouseleave(function(){
				end()
			})
	}
</script>
</body>
</html>